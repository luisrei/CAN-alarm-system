http://developer.mbed.org/users/screamer/code/mbed/#aff670d0d510
